{"version":3,"file":"js/app.105e615e.js","mappings":"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","sources":["webpack://dans-ma-bulle/./src/composables/libraryLoader.js","webpack://dans-ma-bulle/./src/constants.js","webpack://dans-ma-bulle/./src/composables/flashMessages.js","webpack://dans-ma-bulle/./src/components/NavBar.vue","webpack://dans-ma-bulle/./src/components/NavBar.vue?01fd","webpack://dans-ma-bulle/./src/App.vue","webpack://dans-ma-bulle/./src/App.vue?7ccd","webpack://dans-ma-bulle/./src/registerServiceWorker.js","webpack://dans-ma-bulle/./src/components/BookInfo.vue","webpack://dans-ma-bulle/./src/components/BookInfo.vue?a9d0","webpack://dans-ma-bulle/./src/composables/pageManager.js","webpack://dans-ma-bulle/./src/components/PageInfo.vue","webpack://dans-ma-bulle/./src/components/PageInfo.vue?ad9e","webpack://dans-ma-bulle/./src/components/PageController.vue","webpack://dans-ma-bulle/./src/components/PageController.vue?5bf1","webpack://dans-ma-bulle/./src/components/PageReader.vue","webpack://dans-ma-bulle/./src/components/PageReader.vue?9b0b","webpack://dans-ma-bulle/./src/components/PDFReaderManager.vue","webpack://dans-ma-bulle/./src/components/PDFReaderManager.vue?7db5","webpack://dans-ma-bulle/./src/components/PDFReader.vue","webpack://dans-ma-bulle/./src/components/PDFReader.vue?3736","webpack://dans-ma-bulle/./src/composables/ArchiveParser.js","webpack://dans-ma-bulle/./src/components/ArchiveReader.vue","webpack://dans-ma-bulle/./src/components/ArchiveReader.vue?2c0d","webpack://dans-ma-bulle/./src/components/AbstractReader.vue","webpack://dans-ma-bulle/./src/components/AbstractReader.vue?bf7e","webpack://dans-ma-bulle/./src/views/ReadView.vue","webpack://dans-ma-bulle/./src/views/ReadView.vue?b993","webpack://dans-ma-bulle/./src/components/SeriesSelect.vue","webpack://dans-ma-bulle/./src/components/SeriesSelect.vue?df74","webpack://dans-ma-bulle/./src/components/BookSelect.vue","webpack://dans-ma-bulle/./src/components/BookSelect.vue?1032","webpack://dans-ma-bulle/./src/views/BookSelectionView.vue","webpack://dans-ma-bulle/./src/views/BookSelectionView.vue?c334","webpack://dans-ma-bulle/./src/router/index.js","webpack://dans-ma-bulle/./src/store/index.js","webpack://dans-ma-bulle/./src/router/guards.js","webpack://dans-ma-bulle/./src/main.js","webpack://dans-ma-bulle/./src/composables/handlePermission.js","webpack://dans-ma-bulle/./src/composables/storageInstance.js","webpack://dans-ma-bulle/webpack/bootstrap","webpack://dans-ma-bulle/webpack/runtime/chunk loaded","webpack://dans-ma-bulle/webpack/runtime/compat get default export","webpack://dans-ma-bulle/webpack/runtime/define property getters","webpack://dans-ma-bulle/webpack/runtime/ensure chunk","webpack://dans-ma-bulle/webpack/runtime/get javascript chunk filename","webpack://dans-ma-bulle/webpack/runtime/get mini-css chunk filename","webpack://dans-ma-bulle/webpack/runtime/global","webpack://dans-ma-bulle/webpack/runtime/hasOwnProperty shorthand","webpack://dans-ma-bulle/webpack/runtime/load script","webpack://dans-ma-bulle/webpack/runtime/make namespace object","webpack://dans-ma-bulle/webpack/runtime/publicPath","webpack://dans-ma-bulle/webpack/runtime/css loading","webpack://dans-ma-bulle/webpack/runtime/jsonp chunk loading","webpack://dans-ma-bulle/webpack/startup"],"sourcesContent":["import { ref } from 'vue'\r\nimport { PAGE_EXTENSIONS_SUPPORTED, BOOK_TYPE_IMAGE_FOLDER, BOOK_EXTENSIONS_SUPPORTED, BOOK_TYPE_PDF, BOOK_TYPE_ZIP } from '@/constants'\r\nimport { useStore } from 'vuex'\r\nimport { useFlashMessages } from '@/composables/flashMessages'\r\nimport { useStorageInstance } from '@/composables/storageInstance'\r\n\r\nlet instance = null\r\n\r\nexport function useLibraryLoader (store) {\r\n  if (instance) return instance // always return instance if exist\r\n\r\n  const libraryHandle = ref(null)\r\n  const shelf = ref({})\r\n  const isLoading = ref(false)\r\n  const loadedBooksCount = ref(0)\r\n\r\n  if (!store) store = useStore()\r\n  const { addErrorMessage } = useFlashMessages()\r\n\r\n  const getLibraryHandle = async () => {\r\n    if (libraryHandle.value) {\r\n      return libraryHandle.value\r\n    }\r\n    // try to retrieve what was stored\r\n    libraryHandle.value = await useStorageInstance().getLibraryHandle()\r\n    if (libraryHandle.value) {\r\n      // if something was stored, reload library\r\n      await loadLibrary(libraryHandle.value)\r\n    }\r\n    return libraryHandle.value\r\n  }\r\n\r\n  const listSeries = async () => {\r\n    const list = []\r\n    if (!libraryHandle.value) return list\r\n\r\n    try {\r\n      for await (const [, entry] of libraryHandle.value.entries()) {\r\n        if (entry.kind === 'directory') {\r\n          list.push(entry)\r\n        }\r\n      }\r\n    } catch (e) {\r\n      addErrorMessage('An error occurred on comic series listing')\r\n      console.error(e)\r\n    }\r\n    return list\r\n  }\r\n\r\n  const listBooksFromSeries = async (seriesHandle) => {\r\n    const list = []\r\n    if (!seriesHandle) return list\r\n\r\n    try {\r\n      for await (const [, entry] of seriesHandle.entries()) {\r\n        if (entry.kind === 'directory') {\r\n          entry.__bookType = BOOK_TYPE_IMAGE_FOLDER\r\n          list.push(entry)\r\n        } else {\r\n          // get file extension\r\n          const extension = entry.name.slice(entry.name.lastIndexOf('.'))\r\n          if (BOOK_EXTENSIONS_SUPPORTED.includes(extension)) {\r\n            switch (extension) {\r\n              case '.pdf': entry.__bookType = BOOK_TYPE_PDF; break\r\n              case '.zip':\r\n              case '.cbz':\r\n                entry.__bookType = BOOK_TYPE_ZIP; break\r\n              default:\r\n                entry.__bookType = 'file'\r\n            }\r\n            list.push(entry)\r\n          } else {\r\n            console.log('File extension not supported for book: ' + seriesHandle.name + '/' + entry.name, extension)\r\n          }\r\n        }\r\n      }\r\n      // force alphabetical order\r\n      list.sort((a, b) => a.name.localeCompare(b.name, ['fr', 'en'], { sensitivity: 'base' }))\r\n    } catch (e) {\r\n      addErrorMessage('An error occurred on books listing for comic series ' + seriesHandle.name)\r\n      console.error(e)\r\n    }\r\n    return list\r\n  }\r\n\r\n  const listPagesFromBookDirectory = async (bookHandle) => {\r\n    const list = []\r\n    if (!bookHandle) return list\r\n    if (bookHandle.__bookType !== BOOK_TYPE_IMAGE_FOLDER) return list\r\n\r\n    try {\r\n      for await (const [name, entry] of bookHandle.entries()) {\r\n        if (entry.kind === 'file') {\r\n          // get file extension\r\n          const extension = name.slice(name.lastIndexOf('.'))\r\n          if (PAGE_EXTENSIONS_SUPPORTED.includes(extension)) {\r\n            list.push(entry)\r\n          } else {\r\n            console.log('File extension not supported for page: ' + bookHandle.name + '/' + name)\r\n          }\r\n        }\r\n      }\r\n      // force alphabetical order\r\n      list.sort((a, b) => a.name.localeCompare(b.name, ['fr', 'en'], { sensitivity: 'base' }))\r\n    } catch (e) {\r\n      addErrorMessage('An error occurred on pages listing for book ' + bookHandle.name)\r\n      console.error(e)\r\n    }\r\n    return list\r\n  }\r\n\r\n  const loadLibrary = async (mainHandle) => {\r\n    isLoading.value = true\r\n    loadedBooksCount.value = 0\r\n    libraryHandle.value = mainHandle\r\n    shelf.value = {}\r\n    const allSeries = await listSeries()\r\n    for (const seriesHandle of allSeries) {\r\n      const comicSeriesBooks = {}\r\n      const books = await listBooksFromSeries(seriesHandle)\r\n      for (const bookHandle of books) {\r\n        comicSeriesBooks[bookHandle.name] = bookHandle\r\n        loadedBooksCount.value++\r\n      }\r\n      if (books.length) shelf.value[seriesHandle.name] = comicSeriesBooks\r\n    }\r\n    await store.dispatch('selectLibrary', mainHandle.name)\r\n    await useStorageInstance().setLibraryHandle(mainHandle)\r\n    isLoading.value = false\r\n  }\r\n\r\n  const getSeriesList = () => {\r\n    return Object.keys(shelf.value)\r\n  }\r\n\r\n  const getBooksFromSeries = (comicSeries) => {\r\n    if (!shelf.value[comicSeries]) return []\r\n    return Object.keys(shelf.value[comicSeries])\r\n  }\r\n\r\n  const getBookHandle = (comicSeries, book) => {\r\n    if (!shelf.value[comicSeries]) return null\r\n    if (!shelf.value[comicSeries][book]) return null\r\n    return shelf.value[comicSeries][book]\r\n  }\r\n\r\n  const getPagesFromBookDirectory = async (comicSeries, book) => {\r\n    if (!shelf.value[comicSeries]) return []\r\n    if (!shelf.value[comicSeries][book]) return []\r\n    return await listPagesFromBookDirectory(shelf.value[comicSeries][book])\r\n  }\r\n\r\n  instance = {\r\n    libraryHandle,\r\n    loadedBooksCount,\r\n    getLibraryHandle,\r\n    shelf,\r\n    loadLibrary,\r\n    getSeriesList,\r\n    getBooksFromSeries,\r\n    getPagesFromBookDirectory,\r\n    getBookHandle,\r\n    isLoading\r\n  }\r\n\r\n  return instance\r\n}\r\n","// mode used to browse user's directories\r\nexport const DIRECTORY_PERMISSION_MODE = 'read'\r\n\r\n// list of extensions for book files supported by the application. It always includes directories\r\nexport const BOOK_EXTENSIONS_SUPPORTED = ['.pdf', '.zip', '.cbz']\r\n\r\n// list of extensions for page files supported by the application\r\nexport const PAGE_EXTENSIONS_SUPPORTED = ['.jpg', '.jpeg', '.png', '.bmp', '.tiff']\r\n\r\n// key used for persistence\r\nexport const PERSISTENCE_KEY = 'keiwen-dans-ma-bulle'\r\n\r\nexport const BOOK_TYPE_IMAGE_FOLDER = 'image_folder'\r\nexport const BOOK_TYPE_PDF = 'pdf'\r\nexport const BOOK_TYPE_ZIP = 'zip'\r\n","import { ref } from 'vue'\r\n\r\nlet instance = null\r\n\r\nexport function useFlashMessages () {\r\n  if (instance) return instance // always return instance if exist\r\n\r\n  const flashMessages = ref([])\r\n\r\n  const addMessage = (messageObject) => {\r\n    flashMessages.value.push(messageObject)\r\n  }\r\n\r\n  const addSuccessMessage = (content, messageTitle = '', toPersistOnce = false) => {\r\n    addMessage({ type: 'success', message: content, title: messageTitle, persistOnce: toPersistOnce })\r\n  }\r\n\r\n  const addInfoMessage = (content, messageTitle = '', toPersistOnce = false) => {\r\n    addMessage({ type: 'info', message: content, title: messageTitle, persistOnce: toPersistOnce })\r\n  }\r\n\r\n  const addWarningMessage = (content, messageTitle = '', toPersistOnce = false) => {\r\n    addMessage({ type: 'warning', message: content, title: messageTitle, persistOnce: toPersistOnce })\r\n  }\r\n\r\n  const addErrorMessage = (content, messageTitle = '', toPersistOnce = false) => {\r\n    addMessage({ type: 'error', message: content, title: messageTitle, persistOnce: toPersistOnce })\r\n  }\r\n\r\n  const clearMessage = (index) => {\r\n    flashMessages.value.splice(index, 1)\r\n  }\r\n\r\n  const clearAllMessages = () => {\r\n    const persisted = []\r\n    for (const message of flashMessages.value) {\r\n      if (message.persistOnce) {\r\n        message.persistOnce = false\r\n        persisted.push(message)\r\n      }\r\n    }\r\n    flashMessages.value = persisted\r\n  }\r\n\r\n  instance = { flashMessages, addSuccessMessage, addInfoMessage, addWarningMessage, addErrorMessage, clearMessage, clearAllMessages }\r\n  return instance\r\n}\r\n","<script setup>\r\nimport { useStore } from 'vuex'\r\nimport { computed } from 'vue'\r\n\r\nconst store = useStore()\r\n\r\n// computed\r\nconst theme = computed(() => store.getters.theme)\r\n\r\n</script>\r\n\r\n<template>\r\n  <nav :class=\"theme === 'light' ? 'menu-light' : 'menu-dark'\">\r\n    <div class=\"nav-item\" aria-label=\"Navigate to settings\">\r\n      <router-link to=\"/settings\">Settings</router-link>\r\n    </div>\r\n    <div class=\"nav-item\">\r\n      <router-link to=\"/book\" aria-label=\"Navigate to book selection\">Book</router-link>\r\n    </div>\r\n    <div class=\"nav-item\" aria-label=\"Navigate to read page\">\r\n      <router-link to=\"/\">Read</router-link>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import script from \"./NavBar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\r\nimport { useFlashMessages } from '@/composables/flashMessages'\r\nimport { computed } from 'vue'\r\nimport NavBar from '@/components/NavBar'\r\nimport { useStore } from 'vuex'\r\n\r\nconst { flashMessages, clearMessage } = useFlashMessages()\r\nconst store = useStore()\r\nconst messages = computed(() => flashMessages.value)\r\nconst themeName = computed(() => store.getters.theme)\r\n\r\nconst computeAlertClass = (type) => {\r\n  switch (type) {\r\n    case 'error': return 'alert-danger'\r\n    default:\r\n      return 'alert-' + type\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <div :class=\"'theme-'+themeName\">\r\n    <nav-bar></nav-bar>\r\n    <div class=\"message-container\">\r\n      <div v-for=\"(message, msgIndex) in messages\" :key=\"msgIndex\" class=\"alert\" :class=\"computeAlertClass(message.type)\" @click=\"clearMessage(msgIndex)\">\r\n        {{ message.message }}\r\n      </div>\r\n    </div>\r\n    <router-view class=\"content\"/>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n#app {\r\n  & > div.theme-dark {\r\n    --main-color: #C5FDFE;\r\n    --main-bg: #00161E;\r\n    --main-bg-alpha: #04405140; // rgba(main-bg, 0.3)\r\n    --light-bg: #02404C;\r\n    --border-radius: 50px;\r\n    --primary: #DDB04B;\r\n    --primary-alpha: #DDB04B40;\r\n    --primary-darken: #DDB04B80;\r\n  }\r\n  & > div.theme-light {\r\n    --main-color: #0C487B;\r\n    --main-bg: #FFFDF4;\r\n    --main-bg-alpha: #FFFDF34D;\r\n    --light-bg: #76D4EA;\r\n    --border-radius: 50px;\r\n    --light: #000000;\r\n    --dark: #FFFFFF;\r\n    --primary: #0C487B;\r\n    --primary-alpha: #0C487B40;\r\n    --primary-darken: #0C487B80;\r\n  }\r\n}\r\n\r\n.message-container {\r\n  position: fixed;\r\n  width: 100%;\r\n  bottom: 0;\r\n  left: 0;\r\n  z-index: 50;\r\n\r\n}\r\n\r\n</style>\r\n","import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=6a162442&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","/* eslint-disable no-console */\r\n\r\nimport { register } from 'register-service-worker'\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n  register(`${process.env.BASE_URL}service-worker.js`, {\r\n    ready () {\r\n      console.log(\r\n        'App is being served from cache by a service worker.\\n' +\r\n        'For more details, visit https://goo.gl/AFskqB'\r\n      )\r\n    },\r\n    registered () {\r\n      console.log('Service worker has been registered.')\r\n    },\r\n    cached () {\r\n      console.log('Content has been cached for offline use.')\r\n    },\r\n    updatefound () {\r\n      console.log('New content is downloading.')\r\n    },\r\n    updated () {\r\n      console.log('New content is available; please refresh.')\r\n    },\r\n    offline () {\r\n      console.log('No internet connection found. App is running in offline mode.')\r\n    },\r\n    error (error) {\r\n      console.error('Error during service worker registration:', error)\r\n    }\r\n  })\r\n}\r\n","<script setup>\r\nimport { computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\n\r\nconst store = useStore()\r\n\r\n// computed\r\nconst currentSeries = computed(() => store.getters.comicSeries)\r\nconst currentBook = computed(() => store.getters.book)\r\n\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    {{ currentSeries }}: {{ currentBook }}\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","import script from \"./BookInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BookInfo.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useFlashMessages } from '@/composables/flashMessages'\r\nimport { useLibraryLoader } from '@/composables/libraryLoader'\r\n\r\nlet instance = null\r\n\r\nexport function usePageManager (store) {\r\n  if (instance) return instance // always return instance if exist\r\n\r\n  if (!store) store = useStore()\r\n  const libraryLoader = useLibraryLoader()\r\n  const { addWarningMessage } = useFlashMessages()\r\n  let loadedSeries = ''\r\n  let loadedBook = ''\r\n  let loadedPages = []\r\n  const pageCount = ref(0)\r\n\r\n  const loadPages = async () => {\r\n    loadedPages = []\r\n    loadedSeries = store.getters.comicSeries\r\n    loadedBook = store.getters.book\r\n    loadedPages = await libraryLoader.getPagesFromBookDirectory(loadedSeries, loadedBook)\r\n    pageCount.value = loadedPages.length\r\n  }\r\n\r\n  const getPage = (index) => {\r\n    if (!loadedPages[index]) return null\r\n    return loadedPages[index]\r\n  }\r\n\r\n  const getCurrentPage = () => {\r\n    return getPage(store.getters.getCurrentPageIndex())\r\n  }\r\n\r\n  const loadFullBook = async (knownPageCount) => {\r\n    loadedPages = []\r\n    loadedSeries = store.getters.comicSeries\r\n    loadedBook = store.getters.book\r\n    pageCount.value = knownPageCount\r\n  }\r\n\r\n  const isCurrentPageIsFirst = () => {\r\n    const currentPageNumber = store.getters.getCurrentPageIndex() + 1\r\n    return currentPageNumber === 1\r\n  }\r\n\r\n  const isCurrentPageIsLast = () => {\r\n    const currentPageNumber = store.getters.getCurrentPageIndex() + 1\r\n    return currentPageNumber === pageCount.value\r\n  }\r\n\r\n  const goToPage = async (pageNumber) => {\r\n    if (pageNumber < 1) {\r\n      pageNumber = 1\r\n      addWarningMessage('First page reached')\r\n    }\r\n    if (pageNumber > pageCount.value) {\r\n      pageNumber = pageCount.value\r\n      addWarningMessage('Last page reached')\r\n    }\r\n    const pageIndex = pageNumber - 1\r\n    await store.dispatch('selectPageIndex', pageIndex)\r\n    // flag book as completed if last page reached\r\n    if (pageNumber === pageCount.value) {\r\n      await store.dispatch('flagBookCompletion', true)\r\n    }\r\n    // unflag if moved to first page if need to restart it\r\n    if (pageNumber === 1) {\r\n      await store.dispatch('flagBookCompletion', false)\r\n    }\r\n  }\r\n\r\n  instance = {\r\n    pageCount,\r\n    loadFullBook,\r\n    loadPages,\r\n    getPage,\r\n    getCurrentPage,\r\n    isCurrentPageIsFirst,\r\n    isCurrentPageIsLast,\r\n    goToPage\r\n  }\r\n  return instance\r\n}\r\n","<script setup>\r\nimport { ref, computed, watch, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { usePageManager } from '@/composables/pageManager'\r\n\r\nconst store = useStore()\r\nconst { pageCount, goToPage } = usePageManager()\r\n\r\nconst pageNumber = ref(0)\r\nlet timeout\r\n\r\n// computed\r\nconst pageIndex = computed(() => store.getters.getCurrentPageIndex())\r\n\r\nconst checkChange = () => {\r\n  clearTimeout(timeout)\r\n  timeout = setTimeout(() => {\r\n    changePage()\r\n  }, 800) // after 800 ms without any action, auto-validation\r\n}\r\n\r\nconst changePage = async () => {\r\n  await goToPage(pageNumber.value)\r\n}\r\n\r\n// watch\r\nwatch(pageIndex, async (newValue) => {\r\n  pageNumber.value = newValue + 1\r\n})\r\n\r\nonMounted(async () => {\r\n  pageNumber.value = pageIndex.value + 1\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <span class=\"helper\">Page</span><br/>\r\n    <input\r\n      v-model=\"pageNumber\"\r\n      type=\"number\"\r\n      pattern=\"[0-9]*\"\r\n      inputmode=\"numeric\"\r\n      @keyup.enter=\"changePage\"\r\n      @blur=\"changePage\"\r\n      @input=\"checkChange\"\r\n    />&nbsp;/&nbsp;{{ pageCount }}\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","import script from \"./PageInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PageInfo.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\r\nimport { ref, computed, watch, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport PageInfo from '@/components/PageInfo'\r\nimport { usePageManager } from '@/composables/pageManager'\r\n\r\nconst store = useStore()\r\nconst { goToPage, isCurrentPageIsFirst, isCurrentPageIsLast } = usePageManager()\r\n\r\nconst isFirstPage = ref(false)\r\nconst isLastPage = ref(false)\r\n\r\n// computed\r\nconst pageIndex = computed(() => store.getters.getCurrentPageIndex())\r\nconst rightToLeft = computed(() => store.getters.rightToLeft)\r\nconst leftLabel = computed(() => rightToLeft.value ? 'Next' : 'Previous')\r\nconst rightLabel = computed(() => rightToLeft.value ? 'Previous' : 'Next')\r\n\r\nconst toLeftPage = async () => {\r\n  rightToLeft.value ? await nextPage() : await previousPage()\r\n}\r\n\r\nconst toRightPage = async () => {\r\n  rightToLeft.value ? await previousPage() : await nextPage()\r\n}\r\n\r\nconst previousPage = async () => {\r\n  await goToPage(pageIndex.value)\r\n}\r\n\r\nconst nextPage = async () => {\r\n  await goToPage(pageIndex.value + 2)\r\n}\r\n\r\n// watch\r\nwatch(pageIndex, async (newValue) => {\r\n  isFirstPage.value = isCurrentPageIsFirst()\r\n  isLastPage.value = isCurrentPageIsLast()\r\n})\r\n\r\nonMounted(async () => {\r\n  isFirstPage.value = isCurrentPageIsFirst()\r\n  isLastPage.value = isCurrentPageIsLast()\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div class=\"page-controller\">\r\n    <button class=\"page-controller-zone left-zone btn\" @click=\"toLeftPage\" :disabled=\"rightToLeft ? isLastPage : isFirstPage\">&laquo; {{ leftLabel }}</button>\r\n    <page-info class=\"info-zone\"></page-info>\r\n    <button class=\"page-controller-zone right-zone btn\" @click=\"toRightPage\" :disabled=\"rightToLeft ? isFirstPage : isLastPage\">{{ rightLabel }} &raquo;</button>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","import script from \"./PageController.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PageController.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\r\nimport { computed, ref, onMounted, watch } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { usePageManager } from '@/composables/pageManager'\r\nimport { useFlashMessages } from '@/composables/flashMessages'\r\nimport PageController from '@/components/PageController'\r\n\r\nconst store = useStore()\r\nconst { loadPages, getCurrentPage } = usePageManager()\r\nconst { addErrorMessage } = useFlashMessages()\r\n\r\nconst pageSrc = ref(null)\r\n\r\n// computed\r\nconst pageIndex = computed(() => store.getters.getCurrentPageIndex())\r\n\r\nconst loadPage = async () => {\r\n  const pageHandle = getCurrentPage()\r\n  if (!pageHandle) {\r\n    addErrorMessage('No page found')\r\n    return\r\n  }\r\n\r\n  try {\r\n    const imageFile = await pageHandle.getFile()\r\n    // clean previous value\r\n    if (pageSrc.value) {\r\n      URL.revokeObjectURL(pageSrc.value)\r\n    }\r\n    pageSrc.value = URL.createObjectURL(imageFile)\r\n  } catch (e) {\r\n    addErrorMessage('Cannot load image file')\r\n    console.error(e)\r\n  }\r\n}\r\n\r\n// watch\r\nwatch(pageIndex, async (newValue) => {\r\n  await loadPage()\r\n})\r\n\r\nonMounted(async () => {\r\n  await loadPages()\r\n  await loadPage()\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"page-reader\">\r\n      <img :src=\"pageSrc\" :alt=\"'Page ' + (pageIndex+1)\" width=\"100%\" />\r\n      <page-controller></page-controller>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.page-reader {\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 20;\r\n  position: relative;\r\n\r\n  img {\r\n    display: block;\r\n    width: 100%;\r\n    height: auto;\r\n    border: 2px solid var(--light);\r\n    margin-bottom: 2px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./PageReader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PageReader.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PageReader.vue?vue&type=style&index=0&id=7be17ba4&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7be17ba4\"]])\n\nexport default __exports__","<script setup>\r\nimport { watch } from 'vue'\r\n\r\nimport { useActiveDocument } from '@embedpdf/plugin-document-manager/vue'\r\nconst props = defineProps({\r\n  isLoaded: { type: Boolean }\r\n})\r\nconst emit = defineEmits(['loaded-document'])\r\n\r\nconst { activeDocument } = useActiveDocument()\r\n\r\nwatch(() => props.isLoaded, (newValue) => {\r\n  if (newValue) {\r\n    emit('loaded-document', activeDocument.value)\r\n  }\r\n})\r\n\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>\r\n","import script from \"./PDFReaderManager.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PDFReaderManager.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\r\nimport { onMounted, ref, watch, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useFlashMessages } from '@/composables/flashMessages'\r\nimport { useLibraryLoader } from '@/composables/libraryLoader'\r\nimport { usePageManager } from '@/composables/pageManager'\r\nimport PageController from '@/components/PageController'\r\nimport PdfReaderManager from '@/components/PDFReaderManager'\r\nimport { usePdfiumEngine } from '@embedpdf/engines/vue'\r\nimport { EmbedPDF } from '@embedpdf/core/vue'\r\nimport { createPluginRegistration } from '@embedpdf/core'\r\n\r\n// EMBED PDF Import the essential plugins\r\nimport { ViewportPluginPackage, Viewport } from '@embedpdf/plugin-viewport/vue'\r\nimport { ScrollPluginPackage } from '@embedpdf/plugin-scroll/vue'\r\nimport { DocumentContent, DocumentManagerPluginPackage } from '@embedpdf/plugin-document-manager/vue'\r\nimport { RenderLayer, RenderPluginPackage } from '@embedpdf/plugin-render/vue'\r\nimport { ZoomPluginPackage, ZoomMode } from '@embedpdf/plugin-zoom/vue'\r\n\r\nconst store = useStore()\r\nconst { addErrorMessage } = useFlashMessages()\r\nconst { loadFullBook } = usePageManager()\r\n// EMBED PDF Initialize the engine with the Vue composable\r\nconst { engine, isLoading } = usePdfiumEngine()\r\nconst plugins = ref([])\r\n\r\nconst bookSrc = ref(null)\r\nconst embedPdfKey = ref(0)\r\nconst pageIndex = computed(() => store.getters.getCurrentPageIndex())\r\n\r\nconst loadFile = async () => {\r\n  const bookHandle = useLibraryLoader().getBookHandle(store.getters.comicSeries, store.getters.book)\r\n  if (!bookHandle) {\r\n    addErrorMessage('No book found')\r\n    return\r\n  }\r\n\r\n  try {\r\n    const bookFile = await bookHandle.getFile()\r\n    // clean previous value\r\n    if (bookSrc.value) {\r\n      URL.revokeObjectURL(bookSrc.value)\r\n    }\r\n    bookSrc.value = URL.createObjectURL(bookFile)\r\n  } catch (e) {\r\n    addErrorMessage('Cannot load PDF file')\r\n    console.error(e)\r\n  }\r\n}\r\n\r\nconst initPdfReader = () => {\r\n  // EMBED PDF Register the plugins you need\r\n  plugins.value = [\r\n    createPluginRegistration(DocumentManagerPluginPackage, {\r\n      initialDocuments: [{ url: bookSrc.value }]\r\n    }),\r\n    createPluginRegistration(ViewportPluginPackage),\r\n    createPluginRegistration(ScrollPluginPackage, {\r\n      enabled: false\r\n    }),\r\n    createPluginRegistration(RenderPluginPackage),\r\n    createPluginRegistration(ZoomPluginPackage, {\r\n      defaultZoomLevel: ZoomMode.FitPage\r\n    })\r\n  ]\r\n  embedPdfKey.value++\r\n}\r\n\r\nconst onLoadedDocument = (docState) => {\r\n  loadFullBook(docState.document.pageCount)\r\n}\r\n\r\nwatch(bookSrc, (newVal) => {\r\n  if (!newVal) return\r\n  initPdfReader()\r\n})\r\n\r\nonMounted(async () => {\r\n  await loadFile()\r\n})\r\n\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"page-reader\" style=\"height: 100%\">\r\n      <div>\r\n        <div v-if=\"isLoading || !engine\" class=\"loading-pane\">\r\n          Loading PDF Engine...\r\n        </div>\r\n\r\n        <!-- 3. Wrap your UI with the <EmbedPDF> provider -->\r\n        <div v-else class=\"pdf-container\">\r\n          <EmbedPDF :engine=\"engine\" :plugins=\"plugins\" v-slot=\"{ activeDocumentId }\" :key=\"embedPdfKey\">\r\n            <DocumentContent\r\n              v-if=\"activeDocumentId\"\r\n              :document-id=\"activeDocumentId\"\r\n              v-slot=\"{ isLoaded }\"\r\n            >\r\n              <pdf-reader-manager :is-loaded=\"isLoaded\" @loaded-document=\"onLoadedDocument\"></pdf-reader-manager>\r\n              <div v-if=\"isLoaded\" style=\"display: flex; height: 100%; flex-direction: column\">\r\n                <Viewport\r\n                  :document-id=\"activeDocumentId\"\r\n                  style=\"background-color: transparent\"\r\n                >\r\n                  <RenderLayer\r\n                    :key=\"pageIndex\"\r\n                    :document-id=\"activeDocumentId\"\r\n                    :page-index=\"pageIndex\"\r\n                  />\r\n                </Viewport>\r\n              </div>\r\n            </DocumentContent>\r\n          </EmbedPDF>\r\n        </div>\r\n      </div>\r\n\r\n      <page-controller></page-controller>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.page-reader {\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 20;\r\n  position: relative;\r\n}\r\n\r\n.pdf-container {\r\n  height: 72vh;\r\n  width: 51vh;\r\n  overflow: hidden !important;\r\n}\r\n@media (min-width: 700px) {\r\n  /* Desktop */\r\n  .pdf-container {\r\n    height: 137vw;\r\n    width: 97vw;\r\n  }\r\n}\r\n\r\n.pdf-viewport {\r\n  overflow: hidden !important;\r\n}\r\n</style>\r\n","import script from \"./PDFReader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PDFReader.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PDFReader.vue?vue&type=style&index=0&id=5f74d7bc&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5f74d7bc\"]])\n\nexport default __exports__","import { ref } from 'vue'\r\nimport { useFlashMessages } from '@/composables/flashMessages'\r\nimport { BOOK_TYPE_ZIP } from '@/constants'\r\nimport JSZip from 'jszip'\r\n\r\nlet instance = null\r\n\r\nexport function useArchiveParser () {\r\n  if (instance) return instance // always return instance if exist\r\n\r\n  const { addErrorMessage } = useFlashMessages()\r\n  const archiveFile = ref(null)\r\n  const bookType = ref(null)\r\n  const pageCount = ref(0)\r\n  let pagesList = []\r\n\r\n  const loadArchiveFile = async (bookHandle) => {\r\n    if (!bookHandle) {\r\n      addErrorMessage('No book found')\r\n      return\r\n    }\r\n\r\n    try {\r\n      archiveFile.value = null\r\n      bookType.value = bookHandle.__bookType\r\n      pageCount.value = 0\r\n      pagesList = []\r\n      const bookFile = await bookHandle.getFile()\r\n\r\n      switch (bookType.value) {\r\n        case BOOK_TYPE_ZIP: await loadFileAsZip(bookFile); break\r\n        default:\r\n          addErrorMessage('Unknown archive type ' + bookType.value)\r\n      }\r\n    } catch (e) {\r\n      addErrorMessage('Cannot load archive file')\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  const loadArchivePage = async (index) => {\r\n    if (index < 0 || index >= pageCount.value) {\r\n      addErrorMessage('No page found')\r\n      return null\r\n    }\r\n    switch (bookType.value) {\r\n      case BOOK_TYPE_ZIP: return await loadPageFromZip(index)\r\n    }\r\n    return null\r\n  }\r\n\r\n  const loadFileAsZip = async (bookFile) => {\r\n    try {\r\n      archiveFile.value = await JSZip.loadAsync(bookFile)\r\n      pageCount.value = 0\r\n      archiveFile.value.forEach((relativePath, zipEntry) => {\r\n        // zip entries, mixing dir AND files\r\n        if (!zipEntry.dir) {\r\n          pagesList.push(zipEntry)\r\n          pageCount.value++\r\n        }\r\n      })\r\n    } catch (e) {\r\n      console.error('Failed to load ZIP archive:', e)\r\n    }\r\n  }\r\n\r\n  const loadPageFromZip = async (index) => {\r\n    if (!pagesList[index]) return null\r\n    const zipEntry = pagesList[index]\r\n    return await zipEntry.async('blob')\r\n  }\r\n\r\n  instance = {\r\n    loadArchiveFile,\r\n    loadArchivePage,\r\n    pageCount\r\n  }\r\n  return instance\r\n}\r\n","<script setup>\r\nimport { computed, onMounted, ref, watch } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useLibraryLoader } from '@/composables/libraryLoader'\r\nimport { useArchiveParser } from '@/composables/ArchiveParser'\r\nimport PageController from '@/components/PageController'\r\n\r\nimport { usePageManager } from '@/composables/pageManager'\r\n\r\nconst store = useStore()\r\nconst { loadFullBook } = usePageManager()\r\nconst { loadArchiveFile, loadArchivePage, pageCount } = useArchiveParser()\r\n\r\nconst pageSrc = ref(null)\r\nconst pageIndex = computed(() => store.getters.getCurrentPageIndex())\r\n\r\nconst loadFile = async () => {\r\n  const bookHandle = useLibraryLoader().getBookHandle(store.getters.comicSeries, store.getters.book)\r\n  await loadArchiveFile(bookHandle)\r\n  await loadFullBook(pageCount.value)\r\n}\r\n\r\nconst loadPage = async () => {\r\n  // clean previous value\r\n  if (pageSrc.value) {\r\n    URL.revokeObjectURL(pageSrc.value)\r\n  }\r\n  const blob = await loadArchivePage(pageIndex.value)\r\n  if (blob) {\r\n    pageSrc.value = URL.createObjectURL(blob)\r\n  }\r\n}\r\n\r\n// watch\r\nwatch(pageIndex, async (newValue) => {\r\n  await loadPage()\r\n})\r\n\r\nonMounted(async () => {\r\n  await loadFile()\r\n  await loadPage()\r\n})\r\n\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"page-reader\">\r\n      <img :src=\"pageSrc\" :alt=\"'Page ' + (pageIndex+1)\" width=\"100%\" />\r\n      <page-controller></page-controller>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>\r\n","import script from \"./ArchiveReader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ArchiveReader.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { BOOK_TYPE_IMAGE_FOLDER, BOOK_TYPE_PDF, BOOK_TYPE_ZIP } from '@/constants'\r\nimport { useFlashMessages } from '@/composables/flashMessages'\r\nimport { useLibraryLoader } from '@/composables/libraryLoader'\r\nimport PageReader from '@/components/PageReader'\r\nimport PdfReader from '@/components/PDFReader'\r\nimport ArchiveReader from '@/components/ArchiveReader'\r\n\r\nconst store = useStore()\r\nconst { getBookHandle } = useLibraryLoader()\r\nconst { addErrorMessage } = useFlashMessages()\r\n\r\nconst readerType = ref('')\r\n\r\nconst loadBook = async () => {\r\n  const bookHandle = getBookHandle(store.getters.comicSeries, store.getters.book)\r\n  if (!bookHandle) {\r\n    readerType.value = ''\r\n    addErrorMessage('No book found')\r\n    return\r\n  }\r\n  switch (bookHandle.__bookType) {\r\n    case BOOK_TYPE_IMAGE_FOLDER:\r\n      readerType.value = 'pageReader'\r\n      break\r\n    case BOOK_TYPE_PDF:\r\n      readerType.value = 'pdfReader'\r\n      break\r\n    case BOOK_TYPE_ZIP:\r\n      readerType.value = 'archiveReader'\r\n      break\r\n  }\r\n  if (readerType.value === '') {\r\n    addErrorMessage('Unable to read book')\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  loadBook()\r\n})\r\n\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div v-if=\"readerType === 'pageReader'\">\r\n      <page-reader></page-reader>\r\n    </div>\r\n    <div v-if=\"readerType === 'pdfReader'\">\r\n      <pdf-reader></pdf-reader>\r\n    </div>\r\n    <div v-if=\"readerType === 'archiveReader'\">\r\n      <archive-reader></archive-reader>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>\r\n","import script from \"./AbstractReader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AbstractReader.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\r\n// @ is an alias to /src\r\nimport BookInfo from '@/components/BookInfo'\r\nimport AbstractReader from '@/components/AbstractReader'\r\n\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <book-info></book-info>\r\n    <abstract-reader></abstract-reader>\r\n  </div>\r\n</template>\r\n","import script from \"./ReadView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ReadView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\r\nimport { ref, onMounted, watch, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useLibraryLoader } from '@/composables/libraryLoader'\r\n\r\nconst store = useStore()\r\nconst { getSeriesList } = useLibraryLoader()\r\n\r\n// data\r\nconst selectedSeries = ref('')\r\n\r\n// computed\r\nconst allSeries = computed(() => getSeriesList())\r\n\r\n// watch\r\nwatch(selectedSeries, async (newValue) => {\r\n  if (!newValue || newValue === store.getters.comicSeries) return\r\n  store.dispatch('selectComicSeries', newValue)\r\n})\r\n\r\nonMounted(async () => {\r\n  selectedSeries.value = store.getters.comicSeries\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <label for=\"seriesSelect\">Series:</label>\r\n    <select id=\"seriesSelect\" v-model=\"selectedSeries\" :class=\"selectedSeries ? '' : 'empty-select'\">\r\n      <option value=\"\" class=\"placeholder\" disabled selected hidden>Select series...</option>\r\n      <option v-for=\"singleSeries in allSeries\" :key=\"singleSeries\" :value=\"singleSeries\">\r\n        {{ singleSeries }}\r\n      </option>\r\n    </select>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","import script from \"./SeriesSelect.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SeriesSelect.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\r\nimport { ref, computed, watch, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useLibraryLoader } from '@/composables/libraryLoader'\r\nimport { useRouter } from 'vue-router'\r\n\r\nconst store = useStore()\r\nconst { getBooksFromSeries } = useLibraryLoader()\r\nconst router = useRouter()\r\n\r\n// data\r\nconst selectedBook = ref('')\r\n\r\n// computed\r\nconst currentComicSeries = computed(() => store.getters.comicSeries)\r\nconst books = computed(() => {\r\n  const bookNames = getBooksFromSeries(currentComicSeries.value)\r\n  const books = []\r\n  for (let i = 0; i < bookNames.length; i++) {\r\n    books.push({\r\n      name: bookNames[i],\r\n      completed: store.getters.isBookCompleted(currentComicSeries.value, bookNames[i])\r\n    })\r\n  }\r\n  return books\r\n})\r\n\r\n// watch\r\nwatch(currentComicSeries, async (newValue) => {\r\n  if (!newValue) return\r\n  selectedBook.value = store.getters.book\r\n})\r\nwatch(selectedBook, async (newValue) => {\r\n  if (!newValue || newValue === store.getters.book) return\r\n  await store.dispatch('selectBook', newValue)\r\n  router.push({ name: 'read' })\r\n})\r\n\r\nonMounted(async () => {\r\n  selectedBook.value = store.getters.book\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <label for=\"bookSelect\">Book:</label>\r\n    <select id=\"bookSelect\" v-model=\"selectedBook\" :class=\"selectedBook ? '' : 'empty-select'\">\r\n      <option value=\"\" class=\"placeholder\" disabled selected hidden>Select book...</option>\r\n      <option v-for=\"book in books\" :key=\"book.name\" :value=\"book.name\">\r\n        <span v-if=\"book.completed\">&#10003; </span>{{ book.name }}\r\n      </option>\r\n    </select>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","import script from \"./BookSelect.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BookSelect.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\r\nimport SeriesSelect from '@/components/SeriesSelect'\r\nimport BookSelect from '@/components/BookSelect'\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <h1>Book selection</h1>\r\n    <series-select class=\"selection selection-series\"></series-select>\r\n    <book-select class=\"selection selection-book\"></book-select>\r\n  </div>\r\n</template>\r\n","import script from \"./BookSelectionView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BookSelectionView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createRouter, createWebHashHistory } from 'vue-router'\r\nimport ReadView from '../views/ReadView.vue'\r\nimport BookSelection from '../views/BookSelectionView'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'read',\r\n    component: ReadView\r\n  },\r\n  {\r\n    path: '/book',\r\n    name: 'book',\r\n    component: BookSelection\r\n  },\r\n  {\r\n    path: '/settings',\r\n    name: 'settings',\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/SettingsView')\r\n  },\r\n  {\r\n    path: '/setup',\r\n    name: 'setup',\r\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/SetupView.vue')\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory(),\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import { createStore } from 'vuex'\r\nimport VuexPersistence from 'vuex-persist'\r\nimport { useStorageInstance } from '@/composables/storageInstance'\r\n\r\n// create vuex-persist instance\r\nconst vuexPersist = new VuexPersistence({\r\n  // option 1: use local storage\r\n  // storage: window.localStorage,\r\n  // key: PERSISTENCE_KEY\r\n  // option 2: use indexedDB. In this case, you have to set async storage\r\n  // Also in router, wait for restoration before each\r\n  // storage: localForage,\r\n  // option 3: use a specific instance for indexedDB\r\n  storage: useStorageInstance().getStorageInstance(),\r\n  asyncStorage: true,\r\n  key: 'store'\r\n})\r\n\r\nexport default createStore({\r\n  state: {\r\n    library: '',\r\n    comicSeries: '',\r\n    book: '',\r\n    shelf: {},\r\n    rightToLeft: false,\r\n    theme: 'light'\r\n  },\r\n  getters: {\r\n    comicSeries: (state) => state.comicSeries,\r\n    book: (state) => state.book,\r\n    theme: (state) => state.theme,\r\n    shelf: (state) => state.shelf,\r\n    rightToLeft: (state) => state.rightToLeft,\r\n    getBookOnShelf: (state, getters) => (comicSeries, book) => {\r\n      if (!comicSeries) comicSeries = getters.comicSeries\r\n      if (!comicSeries) return null\r\n      if (!book) book = getters.book\r\n      if (!book) return null\r\n      const comicSeriesOnShelf = state.shelf[comicSeries]\r\n      if (!comicSeriesOnShelf) return null\r\n      return comicSeriesOnShelf[book] ?? null\r\n    },\r\n    getPageIndex: (state, getters) => (comicSeries, book) => {\r\n      const bookOnShelf = getters.getBookOnShelf(comicSeries, book)\r\n      if (!bookOnShelf) return 0\r\n      return bookOnShelf.pageIndex ?? 0\r\n    },\r\n    isBookCompleted: (state, getters) => (comicSeries, book) => {\r\n      const bookOnShelf = getters.getBookOnShelf(comicSeries, book)\r\n      if (!bookOnShelf) return false\r\n      return bookOnShelf.completed ?? false\r\n    },\r\n    getCurrentPageIndex: (state, getters) => () => {\r\n      return getters.getPageIndex(getters.comicSeries, getters.book)\r\n    }\r\n  },\r\n  mutations: {\r\n    setLibrary (state, library) {\r\n      state.library = library\r\n    },\r\n    setComicSeries (state, comicSeries) {\r\n      state.comicSeries = comicSeries\r\n    },\r\n    setBook (state, book) {\r\n      state.book = book\r\n    },\r\n    setPageIndex (state, index) {\r\n      const book = state.shelf[state.comicSeries][state.book]\r\n      book.pageIndex = index\r\n    },\r\n    setBookCompleted (state, completedFlag) {\r\n      const book = state.shelf[state.comicSeries][state.book]\r\n      book.completed = completedFlag\r\n    },\r\n    setTheme (state, theme) {\r\n      state.theme = theme\r\n    },\r\n    setRightToLeft (state, rightToLeft) {\r\n      state.rightToLeft = rightToLeft\r\n    },\r\n    addBookOnShelf (state, comicSeriesAndBook) {\r\n      if (!state.shelf[comicSeriesAndBook.comicSeries]) state.shelf[comicSeriesAndBook.comicSeries] = {}\r\n      state.shelf[comicSeriesAndBook.comicSeries][comicSeriesAndBook.book] = {\r\n        pageIndex: 0,\r\n        completed: false\r\n      }\r\n    },\r\n    resetSelection (state) {\r\n      state.comicSeries = ''\r\n      state.book = ''\r\n    }\r\n  },\r\n  actions: {\r\n    selectLibrary ({ state, commit }, library) {\r\n      if (!library) {\r\n        commit('setLibrary', '')\r\n        commit('resetSelection')\r\n      } else if (library !== state.library) {\r\n        commit('setLibrary', library)\r\n        commit('resetSelection')\r\n      }\r\n    },\r\n    selectComicSeries ({ commit }, comicSeries) {\r\n      commit('setBook', '')\r\n      commit('setComicSeries', comicSeries)\r\n    },\r\n    selectBook ({ getters, dispatch, commit }, book) {\r\n      commit('setBook', book)\r\n      const bookOnShelf = getters.getBookOnShelf(getters.comicSeries, book)\r\n      if (!bookOnShelf) dispatch('addBookOnShelf')\r\n    },\r\n    selectPageIndex ({ commit }, index) {\r\n      commit('setPageIndex', index)\r\n    },\r\n    flagBookCompletion ({ commit }, completionFlag) {\r\n      commit('setBookCompleted', completionFlag)\r\n    },\r\n    setTheme ({ commit }, theme) {\r\n      commit('setTheme', theme)\r\n    },\r\n    setRightToLeft ({ commit }, rightToLeft) {\r\n      commit('setRightToLeft', rightToLeft)\r\n    },\r\n    addBookOnShelf ({ getters, commit }, comicSeries, book) {\r\n      if (!comicSeries) comicSeries = getters.comicSeries\r\n      if (!comicSeries) return null\r\n      if (!book) book = getters.book\r\n      if (!book) return null\r\n      commit('addBookOnShelf', { comicSeries: comicSeries, book: book })\r\n    }\r\n  },\r\n  modules: {\r\n  },\r\n  strict: process.env.NODE_ENV !== 'production',\r\n  plugins: [vuexPersist.plugin]\r\n})\r\n","import { useFlashMessages } from '@/composables/flashMessages'\r\nimport { useLibraryLoader } from '@/composables/libraryLoader'\r\nimport { useHandlePermission } from '@/composables/handlePermission'\r\n\r\nexport default function addNavigationGuards (router, store) {\r\n  const { addWarningMessage, clearAllMessages } = useFlashMessages()\r\n  const { getLibraryHandle } = useLibraryLoader(store)\r\n\r\n  router.beforeEach(async (to, from) => {\r\n    // first of all, as we are using async storage for store, wait for reload\r\n    await store.restored\r\n\r\n    // first check if we have a library handle\r\n    // beware that we are not currently heading to it\r\n    const libraryHandle = await getLibraryHandle()\r\n    if (!libraryHandle && to.name !== 'setup') {\r\n      // persist message as we will redirect\r\n      addWarningMessage('Library is not found, please define main directory', '', true)\r\n      return { name: 'setup' }\r\n    }\r\n\r\n    // check that we still have permission\r\n    if (libraryHandle && to.name !== 'setup') {\r\n      const hasPermission = await useHandlePermission().hasPermission(libraryHandle)\r\n      if (!hasPermission) {\r\n        addWarningMessage('Access to library is no longer granted', '', true)\r\n        return { name: 'setup', query: { restore: true } }\r\n      }\r\n    }\r\n\r\n    // check if we have a current author/book when we try to go on chapter\r\n    if ((!store.getters.comicSeries || !store.getters.book) && to.name === 'read') {\r\n      addWarningMessage('Your current book is not found, please choose one', '', true)\r\n      return { name: 'book' }\r\n    }\r\n  })\r\n\r\n  router.afterEach(() => {\r\n    // after each route decided, clear previous messages\r\n    clearAllMessages()\r\n  })\r\n}\r\n","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport './registerServiceWorker'\r\nimport router from './router'\r\nimport store from './store'\r\nimport addNavigationGuards from '@/router/guards'\r\nimport '@/assets/scss/common.scss'\r\n\r\naddNavigationGuards(router, store)\r\n\r\nconst app = createApp(App).use(store).use(router)\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  app.config.devtools = true\r\n}\r\n\r\napp.mount('#app')\r\n","import { ref } from 'vue'\r\nimport { DIRECTORY_PERMISSION_MODE } from '@/constants'\r\nimport { useFlashMessages } from '@/composables/flashMessages'\r\n\r\nexport function useHandlePermission () {\r\n  const permissionStatus = ref(null)\r\n  let isChecking = false\r\n  const { addErrorMessage } = useFlashMessages()\r\n\r\n  const hasPermission = async (handle) => {\r\n    if (!handle) {\r\n      permissionStatus.value = false\r\n      return\r\n    }\r\n\r\n    if (permissionStatus.value === null && !isChecking) {\r\n      isChecking = true\r\n      await checkPermission(handle)\r\n    }\r\n    return permissionStatus.value\r\n  }\r\n\r\n  const checkPermission = async (handle) => {\r\n    try {\r\n      // Check current\r\n      let permission = await handle.queryPermission({ mode: DIRECTORY_PERMISSION_MODE })\r\n\r\n      // If not granted, ask for it\r\n      if (permission !== 'granted') {\r\n        permission = await handle.requestPermission({ mode: DIRECTORY_PERMISSION_MODE })\r\n        if (navigator.storage && navigator.storage.persist) {\r\n          await navigator.storage.persist()\r\n        }\r\n      }\r\n      permissionStatus.value = (permission === 'granted')\r\n    } catch (e) {\r\n      addErrorMessage('An error occurred on permission check')\r\n      console.error(e)\r\n      permissionStatus.value = false\r\n    }\r\n    isChecking = false\r\n  }\r\n\r\n  return { permissionStatus, hasPermission }\r\n}\r\n","import { ref } from 'vue'\r\nimport localforage from 'localforage'\r\nimport { PERSISTENCE_KEY } from '@/constants'\r\n\r\nexport function useStorageInstance () {\r\n  const storageInstance = ref(null)\r\n\r\n  const getStorageInstance = () => {\r\n    if (!storageInstance.value) {\r\n      storageInstance.value = localforage.createInstance({\r\n        name: PERSISTENCE_KEY,\r\n        storeName: 'application-data'\r\n      })\r\n    }\r\n    return storageInstance.value\r\n  }\r\n\r\n  const getLibraryHandle = async () => {\r\n    const instance = getStorageInstance()\r\n    return await instance.getItem('libraryHandle')\r\n  }\r\n\r\n  const setLibraryHandle = async (value) => {\r\n    const instance = getStorageInstance()\r\n    return await instance.setItem('libraryHandle', value)\r\n  }\r\n\r\n  return { getStorageInstance, getLibraryHandle, setLibraryHandle }\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + (chunkId === 594 ? \"about\" : chunkId) + \".\" + {\"44\":\"6b3e2a1d\",\"565\":\"71edd35f\",\"594\":\"46b6f8a6\",\"926\":\"cf6a953d\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"css/\" + \"about\" + \".\" + \"9f2fb11d\" + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"dans-ma-bulle:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","if (typeof document === \"undefined\") return;\nvar createStylesheet = function(chunkId, fullhref, oldTag, resolve, reject) {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tif (__webpack_require__.nc) {\n\t\tlinkTag.nonce = __webpack_require__.nc;\n\t}\n\tvar onLinkComplete = function(event) {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && event.type;\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + errorType + \": \" + realHref + \")\");\n\t\t\terr.name = \"ChunkLoadError\";\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tif (linkTag.parentNode) linkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\n\tif (oldTag) {\n\t\toldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);\n\t} else {\n\t\tdocument.head.appendChild(linkTag);\n\t}\n\treturn linkTag;\n};\nvar findStylesheet = function(href, fullhref) {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = function(chunkId) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, null, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t524: 0\n};\n\n__webpack_require__.f.miniCss = function(chunkId, promises) {\n\tvar cssChunks = {\"594\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(function() {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, function(e) {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr\n\n// no prefetching\n\n// no preloaded","__webpack_require__.b = (typeof document !== 'undefined' && document.baseURI) || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdans_ma_bulle\"] = self[\"webpackChunkdans_ma_bulle\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(4180); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["instance","useLibraryLoader","store","libraryHandle","ref","shelf","isLoading","loadedBooksCount","useStore","addErrorMessage","useFlashMessages","getLibraryHandle","async","value","useStorageInstance","loadLibrary","listSeries","list","entry","entries","kind","push","e","console","error","listBooksFromSeries","seriesHandle","__bookType","BOOK_TYPE_IMAGE_FOLDER","extension","name","slice","lastIndexOf","BOOK_EXTENSIONS_SUPPORTED","includes","BOOK_TYPE_PDF","BOOK_TYPE_ZIP","log","sort","a","b","localeCompare","sensitivity","listPagesFromBookDirectory","bookHandle","PAGE_EXTENSIONS_SUPPORTED","mainHandle","allSeries","comicSeriesBooks","books","length","dispatch","setLibraryHandle","getSeriesList","Object","keys","getBooksFromSeries","comicSeries","getBookHandle","book","getPagesFromBookDirectory","DIRECTORY_PERMISSION_MODE","PERSISTENCE_KEY","flashMessages","addMessage","messageObject","addSuccessMessage","content","messageTitle","toPersistOnce","type","message","title","persistOnce","addInfoMessage","addWarningMessage","clearMessage","index","splice","clearAllMessages","persisted","theme","computed","getters","_createElementBlock","class","_normalizeClass","_createElementVNode","_hoisted_1","_createVNode","_component_router_link","to","_cache","_hoisted_2","_hoisted_3","__exports__","messages","themeName","computeAlertClass","_unref","NavBar","_Fragment","_renderList","msgIndex","key","onClick","$event","_component_router_view","register","ready","registered","cached","updatefound","updated","offline","currentSeries","currentBook","_toDisplayString","usePageManager","libraryLoader","loadedSeries","loadedBook","loadedPages","pageCount","loadPages","getPage","getCurrentPage","getCurrentPageIndex","loadFullBook","knownPageCount","isCurrentPageIsFirst","currentPageNumber","isCurrentPageIsLast","goToPage","pageNumber","pageIndex","timeout","checkChange","clearTimeout","setTimeout","changePage","watch","newValue","onMounted","pattern","inputmode","onKeyup","_withKeys","onBlur","onInput","isFirstPage","isLastPage","rightToLeft","leftLabel","rightLabel","toLeftPage","nextPage","previousPage","toRightPage","disabled","PageInfo","pageSrc","loadPage","pageHandle","imageFile","getFile","URL","revokeObjectURL","createObjectURL","src","alt","width","PageController","props","__props","emit","__emit","activeDocument","useActiveDocument","isLoaded","engine","usePdfiumEngine","plugins","bookSrc","embedPdfKey","loadFile","bookFile","initPdfReader","createPluginRegistration","DocumentManagerPluginPackage","initialDocuments","url","ViewportPluginPackage","ScrollPluginPackage","enabled","RenderPluginPackage","ZoomPluginPackage","defaultZoomLevel","ZoomMode","FitPage","onLoadedDocument","docState","document","newVal","_createBlock","EmbedPDF","activeDocumentId","DocumentContent","PdfReaderManager","_hoisted_4","Viewport","style","RenderLayer","useArchiveParser","archiveFile","bookType","pagesList","loadArchiveFile","loadFileAsZip","loadArchivePage","loadPageFromZip","JSZip","forEach","relativePath","zipEntry","dir","blob","readerType","loadBook","PageReader","PdfReader","ArchiveReader","BookInfo","AbstractReader","selectedSeries","for","id","selected","hidden","singleSeries","router","useRouter","selectedBook","currentComicSeries","bookNames","i","completed","isBookCompleted","SeriesSelect","BookSelect","routes","path","component","ReadView","BookSelection","createRouter","history","createWebHashHistory","vuexPersist","VuexPersistence","storage","getStorageInstance","asyncStorage","createStore","state","library","getBookOnShelf","comicSeriesOnShelf","getPageIndex","bookOnShelf","mutations","setLibrary","setComicSeries","setBook","setPageIndex","setBookCompleted","completedFlag","setTheme","setRightToLeft","addBookOnShelf","comicSeriesAndBook","resetSelection","actions","selectLibrary","commit","selectComicSeries","selectBook","selectPageIndex","flagBookCompletion","completionFlag","modules","strict","process","plugin","addNavigationGuards","beforeEach","from","restored","hasPermission","useHandlePermission","query","restore","afterEach","app","createApp","App","use","mount","permissionStatus","isChecking","handle","checkPermission","permission","queryPermission","mode","requestPermission","navigator","persist","storageInstance","localforage","storeName","getItem","setItem","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","get","f","chunkId","Promise","all","reduce","promises","u","miniCssF","g","globalThis","this","Function","window","obj","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","createElement","charset","nc","setAttribute","onScriptComplete","prev","event","onerror","onload","doneFns","parentNode","removeChild","bind","target","head","appendChild","Symbol","toStringTag","p","createStylesheet","fullhref","oldTag","resolve","reject","linkTag","rel","nonce","onLinkComplete","errorType","realHref","href","err","Error","code","request","insertBefore","nextSibling","findStylesheet","existingLinkTags","tag","dataHref","existingStyleTags","loadStylesheet","installedCssChunks","miniCss","cssChunks","then","baseURI","self","location","installedChunks","installedChunkData","promise","loadingEnded","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}